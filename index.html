<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>2015 MLB Hackathon</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/clean-blog.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html#dashboard">PAoLD Dashboard</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="index.html#analysis">Analysis (Top)</a>
                    </li>
                    <li>
                        <a href="index.html#abstract">Abstract</a>
                    </li>
                    <li>
                        <a href="index.html#controlled-samples">Samples</a>
                    </li>
                    <li>
                        <a href="index.html#defining-pa">Plate Approach</a>
                    </li>
                    <li>
                        <a href="index.html#dashboard-how-to">How To</a>
                    </li>
                    <li>
                        <a href="index.html#dashboard">Dashboard</a>
                    </li>
                    <li>
                        <a href="index.html#methodology">Methodology</a>
                    </li>
                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('img/swing-chain.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Measuring Plate Approach (Optimized to Line Drives)</h1>
                        <h2 class="subheading">Using Controlled Samples of At Bats to Identify Trends</h2>
                        <span class="meta">Analysis and Development by Michael Copeland</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Post Content -->
    <article>
        <div class="container">

            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    
                    <h2 class="section-heading" id="analysis">Analysis - Identifying Deviation of Plate Approach</h2>
                    <p>
                        It didn’t look like the typical Ben Revere at bat. In the top of the ninth in Game 6 of the ALCS, 
the Blue Jays trailing by 1, Revere came to the plate with runners on second and third and one out. The 
Kansas City Royals trusted Wade Davis to close out the series; the Jays at the very least needed Revere 
to get on base. The team’s MVP, Josh Donaldson, stood in the on deck circle.
                    </p>
                    <p>
Revere doesn’t hit walk off home runs, but he puts the bat on the ball more often than not. And yet, with a nasty 
curveball, Davis sent Revere walking back to the dugout. Donaldson grounded out moments later and 
the Royals won the pennant.
                    </p>
                    <p>
Wade Davis was the hero of the ninth inning but are there any indicators that the outs made could be attributed to Jays’ plate 
approach? What happened to Ben Revere?                        
                    </p>
                    <p>
                        <img class="img-responsive" src="img/dashboard-tor.png" alt="">
                    </p>
                    <p>
Before analyzing the data, let's walk through the dashboard and explain what the visualizations are showing.  On the left hand
side, there is trending data for the player's plate approach score.  Each player's pane has a grey strip with a dark
grey line down the middle.  This dark thin line represents the mean score.  The light grey area represents where fifty percent
of the data points fall.  The score is optimizing towards line drives (more on this in the following sections).  Some other
important notes to the trend line:
                        <ul>
                            <li>if trending above the mean, it represents a good approach to hitting line drives (or being "locked in")</li>
                            <li>if trending below the mean, it could possibly represent a different hitting approach or possible struggles</li>
                            <li>if a player is focusing on hitting line drives, the trend line should be tight to the grey area when successful</li>
                        </ul>
                    </p>
                    <p>
To the right and below the filters, there is a box plot showing the same data as a snapshot for the period.  The whiskers represent the lower
and upper quartiles.  This view allows us to compare player profiles.  Notice that Ben Revere has a higher mean score (17.7) than
Dioner Navarro (14.4) and Josh Donaldson (9.4).  This doesn't indicate that Revere is a better hitter, but that he profiles as a
line drive hitter more often (and for which he does get credited, see https://en.wikipedia.org/wiki/Ben_Revere#Offense).  More
information on how the score is calculated will be discussed in following sections.
                    </p>
                    <p>
                        Taking a look at the dashboard Revere starts to negatively deviate from his profile during the playoffs.  
                        Starting October 3rd against Chris Archer, he drops
                        to the lower quartile and never recovers.  At his last sample taken, October 23rd against Yordano Ventura,
                        his score is -88.3.  This is 106 points away from his mean.
                    </p>
                    <p>
A player's success or slump doesn't hinge on his plate approach score.  Revere started 
with Toronto going 0 for 13, yet his plate approach score indicates that he was still hovering close to his normal.  From Aug. 21st to 29th,
he had an 8-game hitting streak which bumped is batting average significantly, yet his plate approach score indicates that he
was no more locked in than when he first joined the team.  It was not until the playoffs that his plate approach score took a dive.  The weekly line drive count 
for his last month in baseball for 2015 is 10, 7, 0, and 2.
                    </p>
                    <p>
                        The dashboard indicates that Revere was struggling with his plate approach come the Kansas City series.
                        This intelligence could be used to go back to see what he was doing in his at bats prior to October 3rd when
                        he was more "locked in". Maybe Revere could have hit one more line drive when the team needed it most.
                    </p>
                    <h2 class="section-heading" id="abstract">Abstract</h2>
                    <p>
Offensive production rates are prone to rise and fall during hot streaks and slumps.  It can be difficult to determine whether
these periods are due to the quality of plate approach or some other factor.  For instance, a batter's average may
drop over a period due to quality pitching despite maintaining a good approach.  In contrast, a batter
may be maintaining his good offense through some seeing-eye singles.  The following analysis and methodology will focus on
uncoupling some of these other factors.  The goal is to have a metric that can gauge whether a batter is trending away from
their mean approach.  Also, it provides a clear visual indicating when a batter starts to deviate.
                    </p>
                    <p>
The following few sections explain how to arrive at a measure for Plate Approach.  If you would like to start
playing with the Dashboard to see what it looks like and then jump back <a href="#dashboard-how-to">click here</a> or use the PAoLD
 (Plate Approach Optimized to Line Drives) Dashboard link on the header ribbon.
                    </p>
                    <h2 class="section-heading" id="controlled-samples">Selecting Controlled Samples</h2>
                    <p>
Let's define a sample as a pitcher going through the batting order.  This should give us roughly 2 to 3 sample sets of
data per game per team to use for analysis.  Note that these samples will be against starting pitchers and long relievers.
In this way, we can control factors such as:
                        <ul>
                            <li>pitcher's fatigue level - each sample is limited to roughly 40 to 50 pitches</li>
                            <li>environmental factors - each sample is on the same day/night under the same weather conditions</li>
                            <li>home plate umpire</li>
                            <li>manager's playing matchups</li>
                        </ul>
The methodology to attach the sample numbers to the original data set are found in the last section on this page (<a href="#methodology">click here</a>)
                    </p>
                    <h2 class="section-heading" id="defining-pa">Defining Plate Approach (Optimized to Line Drives) - PAoLD</h2>
                    <p>
Let's start with a simple premise: each time a batter swings his intention is to put the ball in play.  (There is the exception
where a batter may be spoiling a pitch, but let's keep definitions simple for working towards a minimum viable product.)  If we count the
number of swings to an event, we
have a measure of success (the lower being preferred).  To go one step further, I decided to track the number of swings to
a line drive.  As a first stake in the ground, this seems like a good proxy for a quality hit.  If
the feedback were good, it would be interesting to perhaps pull in hard contact data or blend different 
                    </p>
                    <p>
Next, we only consider our controlled samples when we count the swings to a line drive.  Once a line drive is hit (within a
controlled sample), then we can reset and start from zero.
                    </p>
                    <p>
Now, we have sample sets (with nine players in each of them) with how many swings they have taken until they last hit a line
drive.  Let's transform those numbers into a score by finding the mean and calculating their standard deviation from the
mean (<a href="#query-stddev-from-mean">see how this was derived from the dimensional model</a>).  Since I used a normal distribution,
99.7% of the data is within 3 standard deviations. To convert the number to look more like a score, I multiplied by -3/100.  A 
negative was used so visually we can see an upward trend as positive when we start to look at the Dashboard.

To summarize, controlled samples were created to compare the batter's ability to produce a line drive in the fewest number of
swings.  The sample assumes everyone is trying to put the ball in play and that line drives will serve as proxy to a quality
hit.
                    </p>
                    <h2 class="section-heading" id="dashboard-how-to">Dashboard (How To Use)</h2>
                    <p>
Data for all the Hackathon judges' teams have been included.  Most likely, the starting state of the dashboard will show
too many players to observe insight.  To filter down data:
                        <ol>
                            <li>Use the "Date" range filter in the top-right corner</li>
                            <li>Enter in a player's team into the "Batter" filter underneath the Date filter
                                <ul>
                                    <li>"COL*" for Colorado Rockies</li>
                                    <li>"CLE*" for Cleveland Indians</li>
                                    <li>"DET*" for Detroit Tigers</li>
                                    <li>"MIL*" for Milwaukee Brewers</li>
                                    <li>"MIN*" for Minnesota Twins</li>
                                    <li>"NYM*" for New York Mets</li>
                                    <li>"PIT*" for Pittsburgh Pirates</li>
                                    <li>"TOR*" for Toronto Blue Jays</li>
                                </ul>
                            </li>
                            <li>Also, partial player names may be entered (ex. "Cutch" for Andrew McCutchen)</li>
                        </ol>
Once the list of players has been pared down, you may want to exclude certain players from the dashboard.  This can be done
by right-clicking on a player's name and choosing exclude.  At any time, you may press "Reset" in the bottom right of the dashboard
to go back to the original state.
                    
                    </p>

                </div>

                <div class="col-lg-12">
                    <h2 class="section-heading" id="dashboard">Dashboard</h2>
                    <iframe src="https://public.tableau.com/profile/publish/PlateApproach/Dashboard?:showVizHome=no&:embed=true" width="1170" height="780" scrolling="no"></iframe>
                <div>

                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    
                    <h2 class="section-heading" id="methodology">Methodology</h2>

                    <p>
Using the data set provided by TruMedia Networks for the Hackathon, dimensional models were created as the basis for a data warehouse. 
Python scripts were used to ingest the data:

                        <ul>
                            <li><a href="https://github.com/jelloslinger/2015-mlb-hackathon/tree/master/python/mlb" target="_blank">https://github.com/jelloslinger/2015-mlb-hackathon/tree/master/python/mlb</a></li>
                        </ul>
                                
                    </p>
<p>                    
  The first model below represents the "Pitch By Pitch" data provided:
</p>
                    <p>
                        <img class="img-responsive" src="img/pitchbypitch-dimensional-model.png" alt="Pitch By Pitch Dimensional Model">
                    </p>
                    <span class="caption text-muted">Pitch By Pitch Dimensional Model.</span>
                    <p>
Next, an aggregate model was created to represent "At Bats".  This model defines new metrics not found in the original data set.  As "swings to ball in play" and "swings to line drive" were needed for the analysis, business logic was written within the Python scripts to produce these metrics.
                    </p>
                    <p>
                        <img class="img-responsive" src="img/at-bat-dimensional-model.png" alt="At Bat Dimensional Model">
                    </p>
                    <span class="caption text-muted">At Bat Dimensional Model.</span>
                    <p>With sound data models in place, it made analysis much easier via SQL.  For example, the query used to produce the data extract was:</p>
                    <p>
                        <img class="img-responsive" id="query-stddev-from-mean" src="img/query-stddev-from-mean.png" alt="At Bat Dimensional Model">
                    </p>
                    <span class="caption text-muted">Query for Standard Deviation from the Mean.</span>
                    <p>
                        With the data to be analyzed in hand, the last step was to develop the dashboard using a visualization tool.  Tableau Pubic was leveraged
                        to build out the Dashboard.
                    </p>
                    <h2 class="section-heading">Acknowledgements</h2>
                    <p>
                        Thanks to:
                        <ul>
                            <li>Sean Shaughnessy for playing around with the dashboard and finding interesting results</li>
                            <li>Aaron Hutchins for editing the Analysis piece</li>
                            <li>Paul Luong for affirming the data models</li>
                        </ul>
                    </p>
                </div>
            </div>
        </div>
    </article>

    <hr>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/clean-blog.min.js"></script>

</body>

</html>
